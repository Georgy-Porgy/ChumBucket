#include "pch.h"
#include <stdio.h>
int get_value(int lower, int upper);
int czy_przestepny(int Year);
int wypisz_dzien_tygodnia(int dzientygodnia);
int ilosc_dni_miesiaca(int month,int year);
int wyswietl_kalendarz(int month, int year, int xdnimiesiaca, int xdzientygodniamiesiac);
int wylicz_dni(int day, int month, int year);
int main(void)
{
	int xC = 0;
	int xYY = 0;
	int xG = 0;
	int xdzientygodnia = 0;
	int xdzienpoczatekroku = 0;
	int xdnimiesiaca = 0;
	int xdzientygodniamiesiac = 0;
	
	printf("Podaj dzien: ");
	int xDay = get_value(1, 31);
	if (xDay < 1)
		return 0;

	printf("Podaj miesiac:");
	int xMonth = get_value(1, 12);
	if (xMonth < 1)
		return 0;

	printf("Podaj rok:");
	int xYear = get_value(1970, -1);
	if (xYear < 1)
		return 0;

	int xrokprzestepny = czy_przestepny(xYear);
	
	if(xrokprzestepny ==1)
		printf("Podany rok %i jest przestepny \n", xYear);
	else
		printf("Podany rok %i nie jest przestepny \n", xYear);
	
	xYY = (xYear - 1) % 100;
	xC = (xYear - 1) - xYY;
	xG = xYY + xYY / 4;
	xdzienpoczatekroku = (((((xC / 100) % 4) * 5) + xG) % 7);
	
	int xIlosc = wylicz_dni(xDay, xMonth, xYear);
	int xiloscMiesiac = wylicz_dni(1, xMonth, xYear);
	printf("Dni od poczatku roku: %i\n", xIlosc);
	
	xdzientygodnia = (xdzienpoczatekroku + xIlosc - 1) % 7;
	
	xdzientygodniamiesiac = (xdzienpoczatekroku + xiloscMiesiac - 1) % 7;
	printf("Dzien tygodnia dla 01.%d.%d to ", xMonth, xYear);
	 int wypisz = wypisz_dzien_tygodnia(xdzientygodniamiesiac);
	printf("\n");

	printf("Podany dzien tygodnia %i.%i.%i to ", xDay, xMonth, xYear);
	wypisz = wypisz_dzien_tygodnia(xdzientygodnia);
	printf("\n");
	
	xdnimiesiaca = ilosc_dni_miesiaca(xMonth, xYear);
	printf("\n");
	printf("Kalendarz na miesiac %i.%i \n", xMonth, xYear);
	printf("Pn  Wt  Sr  Cz  Pt  So  Nd \n");
	int wyswietl = wyswietl_kalendarz(xMonth, xYear, xdnimiesiaca, xdzientygodniamiesiac);
}



int get_value(int lower, int upper)
{
	int x = 0;
	scanf_s("%d", &x);
	if (x < lower)
	{
		printf("Podano niepoprawna wartosc\n");
		x = 0;
		return x;
	}
	if (upper == -1)
		return x;
	if (x > upper)
	{
		printf("Podano niepoprawna wartosc\n");
		x = 0;
		return x;
	}
	return x;
}
int czy_przestepny(int Year)
{
	int rokprzestepny = 0;
	if (((Year % 4 == 0) && (Year % 100 != 0)) || (Year % 400 == 0))
	{
		rokprzestepny = 1;
	}
	else
	{
		rokprzestepny = 0;
	}
	return rokprzestepny;
}
int wypisz_dzien_tygodnia(int dzientygodnia)
{
	if (dzientygodnia == 0)
		printf("poniedzialek.");
	if (dzientygodnia == 1)
		printf("wtorek.");
	if (dzientygodnia == 2)
		printf("sroda.");
	if (dzientygodnia == 3)
		printf("czwartek.");
	if (dzientygodnia == 4)
		printf("piatek.");
	if (dzientygodnia == 5)
		printf("sobota.");
	if (dzientygodnia == 6)
		printf("niedziela.");
	return 0;
}
int ilosc_dni_miesiaca(int month,int year)
{
	int xdnimiesiaca;
	int xrokprzestepny = czy_przestepny(year);
	xdnimiesiaca = 31;
	if ((month == 4) || (month == 6) || (month == 9) || (month == 11))
	{
		xdnimiesiaca = 30;
	}
	if (month == 2)
	{
		xdnimiesiaca = 28;
		if (xrokprzestepny == 1)
		{
			xdnimiesiaca = 29;
		}
	}
	return xdnimiesiaca;
}
int wyswietl_kalendarz(int month, int year, int xdnimiesiaca, int xdzientygodniamiesiac)
{
	int x = 0;
	int y;
	if (xdzientygodniamiesiac != 0)
	{
		while (x < xdzientygodniamiesiac)
		{
			printf("    ");
			x = x + 1;
		}
	}
	y = 1;
	while (y <= xdnimiesiaca)
	{
		if (y < 10)
			printf(" %i  ", y);
		else
			printf("%i  ", y);
		y = y + 1;
		x = x + 1;
		if (x % 7 == 0)
		{
		
			printf("\n");
			x = 0;
		}
	}
	return 0;
}
int wylicz_dni(int day, int month, int year)
{
	int xIlosc = 0;
	int xiloscMiesiac = 0;
	if (month == 1)
	{
		xIlosc = day;
		xiloscMiesiac = 1;
	}
	if (month == 2)
	{
		xIlosc = 31 + day;
		xiloscMiesiac = 31 + 1;
	}
	if (month == 3)
	{
		xIlosc = 59 + day;
		xiloscMiesiac = 59 + 1;
	}
	if (month == 4)
	{
		xIlosc = 90 + day;
		xiloscMiesiac = 90 + 1;
	}
	if (month == 5)
	{
		xIlosc = 120 + day;
		xiloscMiesiac = 120 + 1;
	}
	if (month == 6)
	{
		xIlosc = 151 + day;
		xiloscMiesiac = 151 + 1;
	}
	if (month == 7)
	{
		xIlosc = 181 + day;
		xiloscMiesiac = 181 + 1;
	}
	if (month == 8)
	{
		xIlosc = 212 + day;
		xiloscMiesiac = 212 + 1;
	}
	if (month == 9)
	{
		xIlosc = 243 + day;
		xiloscMiesiac = 243 + 1;
	}
	if (month == 10)
	{
		xIlosc = 273 + day;
		xiloscMiesiac = 273 + 1;
	}
	if (month == 11)
	{
		xIlosc = 304 + day;
		xiloscMiesiac = 304 + 1;
	}
	if (month == 12)
	{
		xIlosc = 334 + day;
		xiloscMiesiac = 334 + 1;
	}
	int xrokprzestepny = czy_przestepny(year);
	if ((xrokprzestepny == 1) && (month > 2))
	{
		xIlosc = xIlosc + 1;
		xiloscMiesiac = xiloscMiesiac + 1;
	}
	return xIlosc;
}


